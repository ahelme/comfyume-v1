# Auto-generated user frontend services
# Generated by: scripts/generate-user-compose.sh
# DO NOT EDIT MANUALLY - regenerate with: ./scripts/generate-user-compose.sh
#
# Implements batched startup (GitHub Issue #17):
# - Batch leaders (user001, user006, user011, user016) start in parallel
# - Within each batch, containers start sequentially with health checks
# - Total startup time: ~2-3 minutes for 20 users
# - Command: docker compose up -d

services:
  user001:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user001
    ports:
      - "127.0.0.1:8188:8188"
    environment:
      - USER_ID=user001
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      queue-manager:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user001:/comfyui/user
      - ./data/user_data/user001/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user002:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user002
    ports:
      - "127.0.0.1:8189:8188"
    environment:
      - USER_ID=user002
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      user001:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user002:/comfyui/user
      - ./data/user_data/user002/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user003:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user003
    ports:
      - "127.0.0.1:8190:8188"
    environment:
      - USER_ID=user003
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      user002:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user003:/comfyui/user
      - ./data/user_data/user003/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user004:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user004
    ports:
      - "127.0.0.1:8191:8188"
    environment:
      - USER_ID=user004
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      user003:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user004:/comfyui/user
      - ./data/user_data/user004/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user005:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user005
    ports:
      - "127.0.0.1:8192:8188"
    environment:
      - USER_ID=user005
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      user004:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user005:/comfyui/user
      - ./data/user_data/user005/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user006:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user006
    ports:
      - "127.0.0.1:8193:8188"
    environment:
      - USER_ID=user006
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      queue-manager:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user006:/comfyui/user
      - ./data/user_data/user006/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user007:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user007
    ports:
      - "127.0.0.1:8194:8188"
    environment:
      - USER_ID=user007
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      user006:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user007:/comfyui/user
      - ./data/user_data/user007/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user008:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user008
    ports:
      - "127.0.0.1:8195:8188"
    environment:
      - USER_ID=user008
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      user007:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user008:/comfyui/user
      - ./data/user_data/user008/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user009:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user009
    ports:
      - "127.0.0.1:8196:8188"
    environment:
      - USER_ID=user009
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      user008:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user009:/comfyui/user
      - ./data/user_data/user009/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user010:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user010
    ports:
      - "127.0.0.1:8197:8188"
    environment:
      - USER_ID=user010
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      user009:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user010:/comfyui/user
      - ./data/user_data/user010/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user011:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user011
    ports:
      - "127.0.0.1:8198:8188"
    environment:
      - USER_ID=user011
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      queue-manager:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user011:/comfyui/user
      - ./data/user_data/user011/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user012:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user012
    ports:
      - "127.0.0.1:8199:8188"
    environment:
      - USER_ID=user012
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      user011:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user012:/comfyui/user
      - ./data/user_data/user012/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user013:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user013
    ports:
      - "127.0.0.1:8200:8188"
    environment:
      - USER_ID=user013
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      user012:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user013:/comfyui/user
      - ./data/user_data/user013/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user014:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user014
    ports:
      - "127.0.0.1:8201:8188"
    environment:
      - USER_ID=user014
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      user013:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user014:/comfyui/user
      - ./data/user_data/user014/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user015:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user015
    ports:
      - "127.0.0.1:8202:8188"
    environment:
      - USER_ID=user015
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      user014:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user015:/comfyui/user
      - ./data/user_data/user015/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user016:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user016
    ports:
      - "127.0.0.1:8203:8188"
    environment:
      - USER_ID=user016
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      queue-manager:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user016:/comfyui/user
      - ./data/user_data/user016/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user017:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user017
    ports:
      - "127.0.0.1:8204:8188"
    environment:
      - USER_ID=user017
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      user016:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user017:/comfyui/user
      - ./data/user_data/user017/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user018:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user018
    ports:
      - "127.0.0.1:8205:8188"
    environment:
      - USER_ID=user018
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      user017:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user018:/comfyui/user
      - ./data/user_data/user018/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user019:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user019
    ports:
      - "127.0.0.1:8206:8188"
    environment:
      - USER_ID=user019
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      user018:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user019:/comfyui/user
      - ./data/user_data/user019/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

  user020:
    image: comfyume-frontend:v0.11.0
    container_name: comfy-user020
    ports:
      - "127.0.0.1:8207:8188"
    environment:
      - USER_ID=user020
      - QUEUE_MANAGER_URL=http://queue-manager:3000
    depends_on:
      user019:
        condition: service_healthy
    volumes:
      - ${OUTPUTS_PATH}:/outputs
      - ${INPUTS_PATH}:/inputs
      - ${WORKFLOWS_PATH}:/workflows:ro
      - ${MODELS_PATH}:/models:ro
      - ./data/user_data/user020:/comfyui/user
      - ./data/user_data/user020/comfyui/custom_nodes:/comfyui/custom_nodes
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8188/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    networks:
      - comfy-network
    restart: unless-stopped
    cpus: 1.0
    mem_limit: 2G

