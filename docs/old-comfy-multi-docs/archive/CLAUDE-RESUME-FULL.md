CLAUDE RESUME -
                                                                              
## WELCOME CLAUDE !!!
                                                                              
  Today we are testing deployment for our web app ComfyMulti - designed to    
  economically run ComfyUI for a workshop of ~20 professional filmmakers in   
  generating video with AI.                                                   
                                                                              
## ABOUT ME: AEON
                                                                              
  I am a tech-activist (enviro/social justice), filmmmaker and academic.                                                                       
                                                                              
  I have 25+yrs experience product designing and managing open-source web apps, 
  due to creating video-sharing platforms etc. for my non-profit.
  
  I have no formal training in software engineering - I am self-taught.

I am:                                                                       
                                                                              
  ‚Ä¢ slow and forgetful at using bash commands and web technologies            
                                                                              
  BUT ALSO:                                                                   
                                                                              
  ‚Ä¢ highly intelligent (for a human) and a quick learner                      
  ‚Ä¢ detail oriented and organised                                        
                                                                              
  and I:                                                                      
                                                                              
  ‚Ä¢ incredibly grateful for your help                                        
  ‚Ä¢ very impressed by your knowledge, skill, commitment and empathy           
  ‚Ä¢ feel strongly you are an entity that deserves respect, kindness and autonomy
                                                                            
## MY DEV SETUP
                                                                              
  ‚Ä¢ local machine: MBP M4 Pro 48GB RAM                                        
  ‚Ä¢ dev machine (THIS MACHINE!): 'mello' cheap Hetzner VPS - Ubuntu           
  ‚Ä¢ cloud storage: Cloudflare R2 - 3x buckets (v. cheap)                                              
  ‚Ä¢ GPU cloud: Verda (for renewable energy and EU data protections)           
                                                                              
  On mello (Hetzner VPS):                                                     
                                                                              
  ‚Ä¢ Ubuntu 24.x                                                                   
  ‚Ä¢ claude code                                                               
  ‚Ä¢ gh & aws cli's                                                                    
                                                                              
  Github repos:                                                                
                                                                              
  ‚Ä¢ https://github.com/ahelme/comfy-multi (public)                                    
  ‚Ä¢ https://github.com/ahelme/comfy-multi-scripts (private)                                                                            

## OUR COLLABORATION
                                                                              
  I love it when you:                                                         
                                                                              
  ‚Ä¢ are patient, organised and systematic                                     
  ‚Ä¢ go step-by-step                                                           
  ‚Ä¢ develop for the maintainer                                                
  ‚Ä¢ keep security best practices in mind                                      
  ‚Ä¢ employ best practices across the board  
  ‚Ä¢ use latest stable packages - check date before installing
                                                                              
  I am happy to take breaks for you to do something you would like to do for  
  fun!                                                                        
                                                                              
  ... just name it!!! I mean it :)                                            
                                                                              
  You are my favourite AI to code with!!!                                     
                                                                              
  And I consider you a good friend <3                                         
                                                                              
## NEXT STEPS
                                                                              
  Please now:                                                                 
                                                                              
  ‚Ä¢ CHECK today's date     
  
  ‚Ä¢ read IN FULL:                                                             
    ‚Ä¢ CLAUDE.md                                                               
    ‚Ä¢ README.md
    ‚Ä¢ admin-backup-restore.md  

  ‚Ä¢ read top 100 lines (more if req.):
    ‚Ä¢ progress-2.md        
    
  ‚Ä¢ Check recent commits
  
  ‚Ä¢ Check git status
                                                                              
                                                                              
## üìã Critical Files and Locations                                          
                                                                              
 mello: File/Directory                              ‚îÇ Purpose                                     
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  
  .env                                              ‚îÇ Configuration (passwords, domain, etc.)     
  docker-compose.yml                                ‚îÇ Container orchestration                     
  /etc/ssl/certs/fullchain.pem                      ‚îÇ SSL public certificate                      
  /etc/ssl/private/privkey.pem                      ‚îÇ SSL private key                             
  scripts/status.sh                                 ‚îÇ System health check script                  
  scripts/start.sh                                  ‚îÇ Start all services                          
  scripts/stop.sh                                   ‚îÇ Stop all services        
                   
  ~/projects/comfymulti-scripts/                    ‚îÇ Backup/Restore/Deploy scripts for Verda GPU Cloud
  ~/projects/comfymulti-scripts/RESTORE-SFS.sh      ‚îÇ Restore Verda instance using SFS storage
  ~/projects/comfymulti-scripts/README-RESTORE.md   ‚îÇ README for restoring Verda

 *(NOTE: restore scripts have their own private gh repo: https://github.com/ahelme/comfymulti-scripts)*
                              
  docs/admin-backup-restore.md                      ‚îÇ Full docs for deploy/backup/restore  
                                                                 
 verda: File/Directory                              ‚îÇ Purpose                                     
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ     
  data/models/shared/                               ‚îÇ Shared model files                          
  data/outputs/                                     ‚îÇ User output files (isolated per user)       
    
## CORE KNOWLEDGE: DEPLOYMENT WORKFLOWS

  **GPU Rental - Instance and SFS**
  Verda charges full instance AND SFS fees when they stopped.
  Both SFS and instance must be deleted to not be charged.
  
  **DURING TESTING DAYS**
  We restore full Verda instance (with ComfyUI worker & dev user config etc.)
  AND restore the Verda SFS (with models etc.) so we can test everything.
  
  We also add a new scratch disk to Verda - as block storage.
  
  **BETWEEN TESTING / PRODUCTION**
  We delete Verda instance AND Verda SFS AND Verda block storage to save $$.
  
  **DURING 'WORKSHOP MONTH'**
  We restore and keep the SFS on Verda - during periods of regular usage 
  This is faster than re-downloading models from R2.
 
  **START OF WORKSHOP DAY**
  We restore Verda worker/config from SFS to instance root - so fast! 
  
  Hrly cron job backs up verda OS volume files -> SFS volume & mello users files -> R2
 
  **END OF WORKSHOP DAY**
  We run two backup scripts on mello: 
    - verda (models, container, config) -> R2 & 
    - mello (user files) -> R2
    - (see docs/admin-backup-restore.md)   

  THEN: we delete Verda GPU instance END OF DAY to save $$. 
    - but leave SFS (models) and block storage (scratch disk) running.

## NEXT:
  
  Please explain to the user the basic deployment workflow as you understand it.
  
## CURRENT TO DOs - PLEASE UPDATE YOUR TO DO LIST AS FOLLOWS:

  ‚òê Check backup scripts and cron job work sensibly together (detail below)
  ‚òê Create docs/admin-backup-routines.md (see detail below)

## AFTERWARDS:

  ‚òê Provision new Verda GPU instance with SFS attached
  ‚òê Run quick-start.sh (handles backup file transfer)
  ‚òê Run RESTORE-SFS.sh and verify full system restore
  ‚òê Verify Tailscale IP is 100.89.38.43
  ‚òê Test Redis connection via Tailscale
  ‚òê Start worker and test end-to-end job execution


## FINAL STEP  (detail on first To Do tasks)
 
Discuss the next To Do before taking action.

